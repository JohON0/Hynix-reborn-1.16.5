name: Notify Telegram on Push

on:
  push:
    branches: [ main, master ]

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Send to Chat 1
        run: |
          curl -s -X POST \
            "https://api.telegram.org/bot${{ secrets.TELEGRAM_TOKEN }}/sendPhoto" \
            -F "chat_id=${{ secrets.TELEGRAM_CHAT_ID_1 }}" \
            -F "photo=https://i.pinimg.com/736x/4a/c8/27/4ac8275919dcea12994818088a3e8527.jpg" \
            -F "caption=🚀 Новый коммит в ${{ github.repository }}
            👤 Автор: ${{ github.actor }}
            📝 Сообщение: ${{ github.event.head_commit.message }}
            🔗 Ссылка: ${{ github.event.head_commit.url }}" \
            -F "parse_mode=HTML"

      - name: Send to Chat 2
        run: |
          curl -s -X POST \
            "https://api.telegram.org/bot${{ secrets.TELEGRAM_TOKEN }}/sendPhoto" \
            -F "chat_id=${{ secrets.TELEGRAM_CHAT_ID_2 }}" \
            -F "photo=https://i.pinimg.com/736x/4a/c8/27/4ac8275919dcea12994818088a3e8527.jpg" \
            -F "caption=🚀 Новый коммит в ${{ github.repository }}
            👤 Автор: ${{ github.actor }}
            📝 Сообщение: ${{ github.event.head_commit.message }}
            🔗 Ссылка: ${{ github.event.head_commit.url }}" \
            -F "parse_mode=HTML"